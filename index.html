<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Population-Adjusted Indirect Treatment Comparisons in HTA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Link to your external CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100">

    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold text-center mt-6">Population-Adjusted Indirect Treatment Comparisons in HTA</h1>
        <p class="text-center text-gray-500 text-sm mb-6">Last updated: 2025-08-07</p>
        
        <div class="diagram-container">
            <!-- SVG for Arrows -->
            <svg class="absolute top-0 left-0 w-full h-full" style="z-index: 1;">
                <!-- Paths and Labels are drawn by JavaScript -->
                <g id="arrow-group-start-nma" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-start-itc" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-nma-ipd" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-ipd-network-yes" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-ipd-network-no" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-anchored-no" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-anchored-yes" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-any-ipd-mlnmr" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-any-ipd-effectmod" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-effect-mod-yes" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-effect-mod-no" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-itc-key" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-key-anchored-no" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-key-anchored-yes" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-unanchored-next" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-ipd-itc-yes" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-ipd-itc-no" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-external-pop-no" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-external-pop-yes" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-run-maic-next" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-covariate-yes" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-covariate-no" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-unanchored-maic" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-maic-covariate" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-covariate-unanchored-maic-redirect" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
                <g id="arrow-group-covariate-stc" class="hidden"><path stroke-width="2" fill="none"/><text class="arrow-label"></text></g>
            </svg>

            <!-- Decision Boxes -->
            <div id="start" class="decision-box" data-info="The beginning of the decision-making process.">
                <p class="font-semibold">Are there >3 treatments included in the analysis?</p>
                <div class="tooltip">This is the initial question to determine whether Network Meta-Analysis approaches or pairwise ITC/PAIC approaches are required.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('start', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('start', 'no', this)">No</button>
                </div>
            </div>

            <!-- Left Path -->
            <div id="nma-approaches" class="decision-box hidden bg-purple-200" data-info="Network Meta-Analysis (NMA) is required.">
                <p class="font-semibold">NMA approaches required</p>
                <div class="tooltip">NMA allows synthesis of mixed treatment comparisons (direct and indirect) across multiple studies and treatments.</div>
                <div class="mt-2"><button class="decision-btn bg-gray-300 hover:bg-gray-400" onclick="navigate('nma-approaches', 'next', this)">Next</button></div>
            </div>
            <div id="ipd-network" class="decision-box hidden bg-purple-200" data-info="Check for Individual Patient Data (IPD).">
                <p class="font-semibold">Is IPD available for all studies in the network?</p>
                <div class="tooltip">Individual Patient Data allows for more robust population adjustment.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('ipd-network', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('ipd-network', 'no', this)">No</button>
                </div>
            </div>
            <div id="ipd-nma" class="decision-box hidden bg-yellow-200 outcome-box" data-info="Perform an IPD-based NMA.">
                <p class="font-semibold">IPD NMA</p>
                <div class="tooltip">A robust and flexible approach for population adjustment when Individual Patient Data is available for all studies.</div>
            </div>
            <div id="anchored" class="decision-box hidden bg-purple-200" data-info="Check for a direct evidence pathway.">
                <p class="font-semibold">Are the treatments "anchored"?</p>
                <div class="tooltip">An anchored comparison means there is a common comparator connecting treatments via a pathway of head-to-head trials.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('anchored', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('anchored', 'no', this)">No</button>
                </div>
            </div>
            <div id="disconnected-nma" class="decision-box hidden outcome-box" data-info="Disconnected NMA modelling required.">
                <p class="font-semibold">Disconnected NMA modelling approaches required</p>
                <div class="tooltip">Additional (strong) assumptions and specific modelling is needed when the network of evidence is disconnected.</div>
            </div>
            <div id="any-ipd" class="decision-box hidden bg-purple-200" data-info="Check for any IPD.">
                <p class="font-semibold">Is IPD available for any studies in the network?</p>
                <div class="tooltip">Even Individual Patient Data for a subset of studies can enhance the analysis and allow more flexibility.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('any-ipd', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('any-ipd', 'no', this)">No</button>
                </div>
            </div>
            <div id="effect-modification" class="decision-box hidden bg-purple-200" data-info="Consider if treatment effects vary.">
                <p class="font-semibold">Are effect modifiers balanced across all included trials?</p>
                <div class="tooltip">Effect modification occurs when the treatment effect differs for patient subgroups.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('effect-modification', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('effect-modification', 'no', this)">No</button>
                </div>
            </div>
            <div id="network-meta-regression" class="decision-box hidden bg-yellow-200 outcome-box" data-info="Use Network Meta-Regression.">
                <p class="font-semibold">Network Meta-Regression</p>
                <div class="tooltip">This method uses aggregate data to model a relationship between treatment effects and covariates in order to balance effect modifiers.</div>
            </div>
            <div id="nma" class="decision-box hidden bg-yellow-200 outcome-box" data-info="Perform a standard NMA.">
                <p class="font-semibold">NMA</p>
                <div class="tooltip">A standard Network Meta-Analysis using only aggregate data.</div>
            </div>

            <!-- Right Path -->
            <div id="itc-approaches" class="decision-box hidden bg-purple-200" data-info="Indirect Treatment Comparison (ITC) is needed.">
                <p class="font-semibold">"Pairwise" ITC approaches required</p>
                <div class="tooltip">An Indirect Treatment Comparison is used when treatments have not been compared directly in a randomised trial.</div>
                <div class="mt-2"><button class="decision-btn bg-gray-300 hover:bg-gray-400" onclick="navigate('itc-approaches', 'next', this)">Next</button></div>
            </div>
            <div id="key-treatment-anchored" class="decision-box hidden bg-purple-200" data-info="Check if the main comparison is anchored.">
                <p class="font-semibold">Is the key treatment comparison "anchored"?</p>
                <div class="tooltip">An anchored comparison means there is a common comparator connecting treatments via a pathway of head-to-head trials.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('key-treatment-anchored', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('key-treatment-anchored', 'no', this)">No</button>
                </div>
            </div>
            <div id="unanchored-itc" class="decision-box hidden bg-orange-200" data-info="Warning about unanchored comparisons.">
                <p class="font-semibold">Strong, untestable assumptions required for unanchored ITC.</p>
                <div class="tooltip">Unanchored comparisons require that all prognostic factors and effect modifiers are balanced across all trials. This will rarely (if ever) be possible and so these comparisons are highly susceptible to bias.</div>
                <div class="mt-2"><button class="decision-btn bg-gray-300 hover:bg-gray-400" onclick="navigate('unanchored-itc', 'next', this)">Next</button></div>
            </div>
            <div id="ipd-itc" class="decision-box hidden bg-purple-200" data-info="Check for IPD in the ITC.">
                <p class="font-semibold">Is IPD available for all studies in the ITC?</p>
                <div class="tooltip">Individual Patient Data allows more robust population adjustment.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('ipd-itc', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('ipd-itc', 'no', this)">No</button>
                </div>
            </div>
            <div id="external-population" class="decision-box hidden bg-purple-200" data-info="Generalize to a different population?">
                <p class="font-semibold">Do you want to estimate effects in an external target population?</p>
                <div class="tooltip">Relevant when trial populations differ from the population of interest that is relevant to the decision problem.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('external-population', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('external-population', 'no', this)">No</button>
                </div>
            </div>
            <div id="ml-nmr" class="decision-box hidden bg-yellow-200 outcome-box" data-info="Multilevel Network Meta-Regression.">
                <p class="font-semibold">ML-NMR</p>
                <div class="tooltip">Multi-Level Network Meta-Regression uses outcome regression to adjust for population differences between trials.</div>
            </div>
            <div id="run-maic" class="decision-box hidden bg-purple-200" data-info="Matching-Adjusted Indirect Comparison.">
                <p class="font-semibold">Run a MAIC</p>
                <div class="tooltip">Matched Adjusted Indirect Comparison is run here, as it provides quantitative information on the degree of covariate overlap and may be selected as the final analysis approach.</div>
                <div class="mt-2"><button class="decision-btn bg-gray-300 hover:bg-gray-400" onclick="navigate('run-maic', 'next', this)">Next</button></div>
            </div>
            <div id="covariate-overlap" class="decision-box hidden bg-purple-200" data-info="Check for overlap in patient characteristics.">
                <p class="font-semibold">Is there reasonable covariate overlap?</p>
                <div class="tooltip">Covariate overlap can be statistically assessed by examining the Effective Sample Size (ESS) from a MAIC. Note that overlap can only be assessed in this way for covariates included in the propensity score reweighting model.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('covariate-overlap', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('covariate-overlap', 'no', this)">No</button>
                </div>
            </div>
            <div id="maic" class="decision-box hidden bg-yellow-200 outcome-box" data-info="Perform a MAIC.">
                <p class="font-semibold">MAIC</p>
                <div class="tooltip">Matched Adjusted Indirect Comparison reweights individuals to adjusts for population differences between trials.</div>
            </div>
            
            <!-- New Unanchored Path Boxes -->
            <div id="run-maic-unanchored" class="decision-box hidden bg-purple-200" data-info="Run a Matching-Adjusted Indirect Comparison for the unanchored case.">
                <p class="font-semibold">Run a MAIC</p>
                <div class="tooltip">Matched Adjusted Indirect Comparison is run here, as it provides quantitative information on the degree of covariate overlap and may be selected as the final analysis approach.</div>
                <div class="mt-2"><button class="decision-btn bg-gray-300 hover:bg-gray-400" onclick="navigate('run-maic-unanchored', 'next', this)">Next</button></div>
            </div>
            <div id="covariate-overlap-unanchored" class="decision-box hidden bg-purple-200" data-info="Check for overlap in patient characteristics for the unanchored case.">
                <p class="font-semibold">Is there reasonable covariate overlap?</p>
                <div class="tooltip">Covariate overlap can be statistically assessed by examining the Effective Sample Size (ESS) from a MAIC. Note that overlap can only be assessed in this way for covariates included in the propensity score model.</div>
                <div class="mt-2">
                    <button class="decision-btn bg-blue-500 text-white hover:bg-blue-600" onclick="navigate('covariate-overlap-unanchored', 'yes', this)">Yes</button>
                    <button class="decision-btn bg-red-500 text-white hover:bg-red-600" onclick="navigate('covariate-overlap-unanchored', 'no', this)">No</button>
                </div>
            </div>
            <div id="unanchored-stc" class="decision-box hidden bg-yellow-200 outcome-box" data-info="Perform an Unanchored STC.">
                <p class="font-semibold">STC</p>
                <div class="tooltip">Simulated Treatment Comparison (STC) is an alternative pairwise outcome regression approach to adjust for population differences between trials. It is useful where there is insufficient overlap for MAIC, and where an unanchored comparison is required.</div>
            </div>
        </div>
    </div>

    <div id="reset-btn-container">
        <button id="reset-btn" class="bg-indigo-600 text-white hover:bg-indigo-700 px-6 py-2 rounded-md font-semibold shadow-md">Reset Diagram</button>
    </div>

    <!-- The Modal -->
    <div id="outcomeModal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2 id="modalTitle" class="text-2xl font-bold mb-4"></h2>
        <div id="modalBody">
            <!-- Content will be injected here by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Link to your external JavaScript file -->
    <script src="script.js"></script>
</body>
</html>